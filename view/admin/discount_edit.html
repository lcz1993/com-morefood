<style>
    .hide{
        display: none;
    }
</style>
<div class="modal-dialog ">
    <form method="post" class="form-horizontal" action="/admin/discount/edit" data-validate="parsley">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">{{controller.meta_title}}</h4>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="col-sm-3 control-label">优惠券名称</label>
                    <div class="col-sm-9">
                        <div class="row">
                            <div class="col-md-8 ">
                                <input type="text" name="name" value="{{data.name}}" class="input-sm form-control" placeholder="优惠券名称" data-required="true">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">开始时间</label>
                    <div class="col-sm-9">
                        <div class="row">
                            <div class="col-md-8 ">
                                <input type="text" name="start_time" value="{{data.start_time}}" class="input-sm form-control date" placeholder="使用期限开始时间">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">结束时间</label>
                    <div class="col-sm-9">
                        <div class="row">
                            <div class="col-md-8 ">
                                <input type="text" name="end_time" value="{{data.end_time}}" class="input-sm form-control date" placeholder="使用期限结束时间">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">优惠券状态</label>
                    <div class="col-sm-9">
                        <div class="row">
                            <div class="col-md-8 ">
                                <label>正常</label>
                                <input type="radio" name="status" value="0"{%if data.status == 0%}checked="checked"{%endif%} />
                                <label>过期</label>
                                <input type="radio" name="status" value="1"{%if data.status == 1%}checked="checked"{%endif%} />    <!--默认选中-->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-3 control-label">优惠券种类</label>
                    <div class="col-sm-9">
                        <div class="row">
                            <div class="col-md-8 ">
                                <select class="form-control input-sm" name="type" onchange="show()" id="type">
                                    <option value="0" {%if data.type == 0%}selected{%endif%}>折扣</option>
                                    <option value="1" {%if data.type == 1%}selected{%endif%}>满减</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group {%if data.type == 1%}hide{%endif%}" id="percent">
                    <label class="col-sm-3 control-label">折扣</label>
                    <div class="col-sm-9">
                        <div class="row">
                            <div class="col-md-8 ">
                                <input type="text" name="percent" value="{{data.percent}}" class="input-sm form-control number" placeholder="打折倍数">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group  {%if data.type == 0%}hide{%endif%} " id="min_price">
                    <label class="col-sm-3 control-label">满</label>
                    <div class="col-sm-9">
                        <div class="row">
                            <div class="col-md-8 ">
                                <input type="text" name="min_price" value="{{data.min_price}}" class="input-sm form-control number" placeholder="满">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group  {%if data.type == 0%}hide{%endif%}" id="cut_price">
                    <label class="col-sm-3 control-label">减</label>
                    <div class="col-sm-9">
                        <div class="row">
                            <div class="col-md-8 ">
                                <input type="text" name="cut_price" value="{{data.cut_price}}" class="input-sm form-control number" placeholder="减">
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <input type="hidden" name="id" value="{{data.id}}">
                <a href="javascript:;" class="btn btn-default" data-dismiss="modal">关闭</a>
                <button class="btn btn-primary btn-s-md ajax-post" type="submit" target-form="form-horizontal">确定</button>
            </div>
        </div><!-- /.modal-content -->
    </form>
</div><!-- /.modal-dialog -->
<script src="/static/admin/js/datepicker/bootstrap-datetimepicker.min.js" type="text/javascript"></script>
<script src="/static/admin/js/datepicker/locales/bootstrap-datetimepicker.zh-CN.js" type="text/javascript"></script>
<script>
    $(function () {
        $('.date').datetimepicker({
            format: 'yyyy-mm-dd HH:ii:ss',
            language:"zh-CN",
            minView:2,
            autoclose:true
        });
    })
    function show() {
        var type = $('#type option:selected').val();
        if(parseInt(type) === 0){
            $('#percent').removeClass('hide');
            $('#min_price').addClass('hide');
            $('#cut_price').addClass('hide');
        }else if(parseInt(type) === 1){
            $('#percent').addClass('hide');
            $('#min_price').removeClass('hide');
            $('#cut_price').removeClass('hide');
        }
    }
</script>
